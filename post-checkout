#!/usr/bin/env ruby

from, to, flag = ARGV
exit unless flag == '1' && to != from

rollbacks = []
migrations = []

`git diff --name-status #{from} #{to} db/migrate/`.split("\n").each do |line|
  status, file = line.split("\t")
  rollbacks <<= file if status == "D"
  migrations <<= file if status == "A"
end

puts "Migrating:  #{migrations.count} up, #{rollbacks.count} down"

